# Render.com Deployment Guide

## üöÄ Quick Deploy Steps

### 1. Create Render Account
- Go to https://render.com
- Sign up with GitHub (recommended) or email
- Verify your email

### 2. Connect GitHub Repository
- Click "New +" ‚Üí "Web Service"
- Connect your GitHub account if not already connected
- Select the repository: `3bsolutionsltd/gidudu`
- Click "Connect"

### 3. Configure the Service

Render should auto-detect the `render.yaml` file. If not, use these settings:

**Basic Settings:**
- Name: `igfm-cms-backend`
- Region: `Ohio (US East)` (or closest to you)
- Branch: `main`
- Root Directory: Leave blank (render.yaml handles it)

**Build & Deploy:**
- Build Command: `cd server && npm install`
- Start Command: `cd server && npm start`

**Environment Variables:**
- `NODE_ENV` = `production`
- `JWT_SECRET` = (Click "Generate" for random secure key)
- `PORT` = `3000`

**Plan:**
- Select "Free" plan

### 4. Deploy!
- Click "Create Web Service"
- Wait 2-5 minutes for deployment
- You'll see build logs in real-time

### 5. Get Your Backend URL

After successful deployment, you'll see:
```
Your service is live at https://igfm-cms-backend.onrender.com
```

Copy this URL! You'll need it.

### 6. Update Frontend Configuration

**Option A: If URL is different from default**

Edit `js/cms-loader.js`:
```javascript
const CMS_API_URL = window.location.hostname === 'localhost' 
    ? 'http://localhost:3000/api'
    : 'https://YOUR-ACTUAL-URL.onrender.com/api';
```

Replace `YOUR-ACTUAL-URL` with your service URL.

**Option B: Using default (already configured)**

If your service is named `igfm-cms-backend`, it's already set to:
`https://igfm-cms-backend.onrender.com`

### 7. Update CORS Settings

If your GitHub Pages URL is different, edit `server/server.js`:
```javascript
app.use(cors({
    origin: process.env.NODE_ENV === 'production' 
        ? ['https://YOUR-USERNAME.github.io', 'https://YOUR-BACKEND.onrender.com']
        : '*',
    credentials: true
}));
```

### 8. Commit and Push Changes

```bash
git add .
git commit -m "Configure for Render deployment"
git push origin main
```

Render will automatically redeploy when you push to main!

### 9. Access Admin Panel

Your admin panel will be at:
```
https://igfm-cms-backend.onrender.com/admin
```

Login: `admin` / `admin123`

**‚ö†Ô∏è IMPORTANT: Change password immediately after first login!**

### 10. Test Your Website

Visit your GitHub Pages site:
```
https://3bsolutionsltd.github.io/gidudu/
```

The hero section should now load videos from your Render backend!

## üîß Troubleshooting

### Build Fails
- Check build logs in Render dashboard
- Verify `package.json` has all dependencies
- Ensure Node.js version is compatible (16+)

### CORS Errors
- Add your frontend URL to CORS whitelist in `server.js`
- Redeploy after changes

### Cannot Access Admin Panel
- Ensure `/admin` route works: https://your-service.onrender.com/admin
- Check if `server/admin/index.html` exists
- Clear browser cache (Ctrl+F5)

### Videos Not Loading
- Check browser console for errors
- Verify API URL in `cms-loader.js` matches your Render URL
- Ensure backend is running (visit `/api/hero` endpoint)
- Check CORS settings

### Free Tier Limitations
- Service spins down after 15 minutes of inactivity
- First request after inactivity takes ~30 seconds to wake up
- 750 hours/month free (enough for most use cases)
- To keep always-on, upgrade to paid plan ($7/month)

## üìä Monitoring

### Check Service Status
- Dashboard: https://dashboard.render.com
- View logs in real-time
- Monitor deployments
- Check resource usage

### Logs
Click "Logs" in your service dashboard to see:
- Server startup messages
- API requests
- Errors and warnings

## üîê Security Checklist

After deployment:

- [ ] Change default admin password
- [ ] Verify JWT_SECRET is set (auto-generated by Render)
- [ ] Check CORS allows only your domains
- [ ] Review uploaded files regularly
- [ ] Monitor for suspicious activity

## üí∞ Cost Estimate

**Free Tier (Current Setup):**
- Backend: Free (750 hrs/month)
- Frontend: Free (GitHub Pages)
- Total: $0/month

**Limitations:**
- Service sleeps after 15 min inactivity
- 750 hours/month (31 days * 24 hours = 744 hours)
- 100GB bandwidth/month
- Shared CPU/RAM

**Paid Tier (If needed):**
- Starter: $7/month
- Always-on (no sleep)
- Better performance
- Priority support

## üéØ Next Steps After Deployment

1. **Test everything:**
   - Upload a video via admin panel
   - Check it appears on website
   - Toggle slides on/off
   - Verify titles/subtitles work

2. **Configure custom domain (optional):**
   - Buy a domain (e.g., cms.igfm.org)
   - Add custom domain in Render settings
   - Update DNS records
   - SSL certificate auto-generated

3. **Set up monitoring:**
   - Enable email notifications in Render
   - Set up uptime monitoring (UptimeRobot)
   - Monitor error logs

4. **Backup strategy:**
   - Uploaded files stored on Render's disk
   - Download important videos locally
   - Consider cloud storage integration (S3, Cloudflare R2)

## üìû Support

- **Render Docs**: https://render.com/docs
- **Community**: https://community.render.com
- **Status Page**: https://status.render.com

---

**Your backend will be live at:**
```
https://igfm-cms-backend.onrender.com
```

**Admin panel:**
```
https://igfm-cms-backend.onrender.com/admin
```

Good luck with your deployment! üöÄ
